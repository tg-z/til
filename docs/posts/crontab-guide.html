<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"> <title>$ til</title> <meta name="description" content="short entries of information for my own reference & retention ðŸ““"> <link rel="shortcut icon" type="image/x-icon" href="https://tg-z.github.io/til/favicon.ico"> <link rel="stylesheet" href="style.css"> <style type="text/css"> * {
  box-sizing: border-box;
}

body,
html {
  margin: 1vw 3vw;
  max-width: 900px;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  font-size: 16px;
  line-height: 1.5;
  word-wrap: break-word;
}

p,
blockquote,
ul,
ol,
dl,
table,
pre {
  margin-top: 0;
  margin-bottom: 16px;
}

blockquote {
  margin-right: 0;
  margin-left: 0;
  padding: 0 1em;
  color: #777;
  border-left: 0.25em solid #ddd;
}

a {
  color: blue;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

.markdown-body {
  padding: 15px;
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  margin-top: 24px;
  margin-bottom: 16px;
  font-weight: 600;
  line-height: 1.25;
}

h1 {
  padding-bottom: 0.3em;
  font-size: 2em;
  border-bottom: 1px solid #eee;
}

h2 {
  padding-bottom: 0.3em;
  font-size: 1.5em;
  border-bottom: 1px solid #eee;
}

ul,
ol {
  padding-left: 1.2em;
}

li > p {
  margin-top: 16px;
}

del {
  color: #727272;
}

img {
  max-width: 100%;
  text-align: center;
  align: center;
}

.tags p {
  padding-top: 1em;
  padding-bottom: 2px;
  display: flex;
  flex-wrap: wrap;
  column-gap: 0.5em;
  font-size: 0.75em;
  color: #718096;
  --text-opacity: 1;
}

.tags a {
  <!-- color: #8FBC8F;
  --> color: #EA63A6;
}

footer {
  border-top: 0.1rem dashed;
  padding-top: 1em;
  font-size: 0.75em;
  display: flex;
  flex-wrap: wrap;
  column-gap: 0.5em;
  --text-opacity: 1;
  color: #718096;
}

a.github-corner {
  position: fixed;
  top: 0;
  right: 0;
}

.github-corner svg {
  fill: #e1e1e1;
  color: #000;
  position: absolute;
  top: 0;
  border: 0;
  right: 0;
  z-index: 99;
  width: 4.375rem;
  height: 4.375rem
}

.github-corner:hover .octo-arm {
  -webkit-animation: octocat-wave 560ms ease-in-out;
  animation: octocat-wave 560ms ease-in-out
}

@-webkit-keyframes octocat-wave {
  0,
  100% {
    -webkit-transform: rotate(0);
    transform: rotate(0)
  }
  
20%,
  60% {
    -webkit-transform: rotate(-25deg);
    transform: rotate(-25deg)
  }
  
40%,
  80% {
    -webkit-transform: rotate(10deg);
    transform: rotate(10deg)
  }
}

@keyframes octocat-wave {
  0,
  100% {
    -webkit-transform: rotate(0);
    transform: rotate(0)
  }
  
20%,
  60% {
    -webkit-transform: rotate(-25deg);
    transform: rotate(-25deg)
  }
  
40%,
  80% {
    -webkit-transform: rotate(10deg);
    transform: rotate(10deg)
  }
}

div.mermaid {
  /* font-family: 'trebuchet ms', verdana, arial; */
  font-family: 'Courier New', Courier, monospace !important;
}

pre {
  display: block;
}

code,
tt {
  padding: 1px;
  margin: 0;
  font-size: 85%;
  background-color: rgba(0, 0, 0, 0.04);
  <!-- background-color: #F3F3F3;
  --> border-radius: 3px;
}

pre code {
  padding: 0;
}

table {
  max-width: 100%;
  border: 1px solid;
  margin-top: 0;
}

th {
  margin: 0;
  padding: 0.25em;
  text-decoration: bold;
  border-bottom: 1px solid;
  <!-- background-color: #DDDDDD; -->
}

tr {
  border: 1px solid;
}
a.headerlink:hover {
  background-color: #c60f0f;
  color: white;
}
td,
th {
  vertical-align: center;
}
th.right {
  text-align: center;
}
th.left {
  text-align: center;
}
th.center {
  text-align: center;
}

td {
  padding: 2px;
}

td.right {
  text-align: right;
}
td.left {
  text-align: left;
}
td.center {
  text-align: center;
}

.important {
  padding-bottom: 0.3em;
  font-size: 2em;
  border-bottom: 0.1rem dashed #718096;
}

.posts-list {
  --width: 60rem;
  margin-top: 1em;
  margin-bottom: 1em;
}
.posts-list .post {
  display: grid;
  grid-template-columns: 70% 30%;
  border: 10px solid transparent;
}
.posts-list .post .post-link {
  grid-column-start: 1;
  grid-column-end: 2;
  grid-row-start: span 2;
}
.posts-list .post a.post-link {
  text-decoration: none;
  margin-left:auto;
}
.posts-list .post .summary {
  padding-left: 0.5em;
  font-size: 0.9em;
  color: #555;
}
.posts-list .post time {
  grid-column-start: 2;
  grid-column-end: 3;
  grid-row-start: span 2; /* TODO not sure about this one */
  text-align: right;
  white-space: nowrap; /* prevent breakin date up */
  font-size: 0.8em;
  color: #555;
}
.posts-list .post .post-tags {
  /* ok, that's def nice; that way it ened up taking less vertical space on phone */
  grid-column-start: 1;
  grid-column-end: 3;
  justify-self: stretch;
  text-align: right;
}
.posts-list .pos .post-tags {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: flex-end;
}

#topnav {
  font-weight: 600;
  /* just to separate from the content */
  padding-bottom: 0.3em;
  font-size: 2em;
  margin-bottom: 16px;
  line-height: 1.25;
  border-bottom: 0.1rem dashed #718096;
  font-size: 2em;
  display: flex;
  flex-wrap: wrap; /* default is nowrap; makes it responsive */
  column-gap: 0.3em;
}

#topnav > a {
  color: black; /* default links are blue */
  /* text-transform: lowercase; */
}

#topnav > a:hover {
  color: blue; /* hmm, not sure about this.. a bit misleading, usually unvisited are blue */
  text-decoration: none;
}

.post-tag + .post-tag {
  margin-left: 0.5em;
}
.post-tag {
  font-size: 0.95em;
  font-family: "Lucida Console", Monaco, monospace;
  /* https://stackoverflow.com/a/12362315/706389
     somewhat hacky way to prevent breaking tags on hyphens...
   */
  white-space: nowrap;
}
.tag-active {
  /* color: #EA63A6; pink */
  color: blue;
  font-weight: bold;
}
.tag-inactive {
  color: black;
}
#post-title h1 {
  /* default margin is too large */
  margin-bottom: 0;
}
#post-title .summary {
  /* ???  */
  -webkit-margin-before: 0;
  -webkit-margin-after: 0;
  color: #a9a9a9;
  font-size: 1.5em;
}
#post-footer time {
  color: #555;
} </style> </head> <script src="https://unpkg.com/@highlightjs/cdn-assets@10.5.0/highlight.min.js"></script> <link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@10.5.0/styles/dracula.min.css"> <script> hljs.initHighlightingOnLoad(); </script> <body> <a href="https://github.com/tg-z/til" target="_blank" class="github-corner"> <svg viewbox="0 0 250 250"> <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path> <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path> <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path> </svg> </a> <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script> <script> mermaid.initialize({startOnLoad: true}); </script> <article class="markdown-body"> <h1 id="crontab-guide">crontab guide</h1><ul> <li><a href="#quick-cron-expression-examples">Quick Cron Expression Examples</a></li> <li><a href="#cron-job-expression-definition">Cron Job Expression Definition</a></li> <li><a href="#special-characters">Special characters</a></li> <li><a href="#timezone">Timezone</a></li> <li><a href="#predefined-scheduling-definitions">Predefined scheduling definitions</a></li> <li><a href="#exceptional-case">Exceptional case</a></li> </ul> <h2 id="quick-cron-expression-examples">Quick Cron Expression Examples</h2><table> <thead> <tr> <th>Cron Expression</th> <th>Meaning</th> </tr> </thead> <tbody><tr> <td>* * * * * 2020</td> <td>Execute a cron job every minute during the year 2020</td> </tr> <tr> <td>* * * * *</td> <td>Execute a cron job every minute</td> </tr> <tr> <td>*/5 * * * *</td> <td>Execute a cron job every 5 minutes</td> </tr> <tr> <td>0 * * * *</td> <td>Execute a cron job every hour</td> </tr> <tr> <td>0 12 * * *</td> <td>Fire at 12:00 PM (noon) every day</td> </tr> <tr> <td>15 10 * * *</td> <td>Fire at 10:15 AM every day</td> </tr> <tr> <td>15 10 * * ?</td> <td>Fire at 10:15 AM every day</td> </tr> <tr> <td>15 10 * * * 2020-2022</td> <td>Fire at 10:15 AM every day during the years 2020, 2021 and 2022</td> </tr> <tr> <td>* 14 * * *</td> <td>Fire every minute starting at 2:00 PM and ending at 2:59 PM, every day</td> </tr> <tr> <td>0/5 14,18 * * *</td> <td>Fire every 5 minutes starting at 2:00 PM and ending at 2:55 PM, AND fire every 5 minutes starting at 6:00 PM and ending at 6:55 PM, every day</td> </tr> <tr> <td>0-5 14 * * *</td> <td>Fire every minute starting at 2:00 PM and ending at 2:05 PM, every day</td> </tr> <tr> <td>10,44 14 * 3 3</td> <td>Fire at 2:10 PM and at 2:44 PM every Wednesday in the month of March.</td> </tr> <tr> <td>15 10 * * 1-5</td> <td>Fire at 10:15 AM every Monday, Tuesday, Wednesday, Thursday and Friday</td> </tr> <tr> <td>15 10 15 * *</td> <td>Fire at 10:15 AM on the 15th day of every month</td> </tr> <tr> <td>15 10 L * *</td> <td>Fire at 10:15 AM on the last day of every month</td> </tr> <tr> <td>15 10 * * 5L</td> <td>Fire at 10:15 AM on the last Friday of every month</td> </tr> <tr> <td>15 10 * * 5#3</td> <td>Fire at 10:15 AM on the third Friday of every month</td> </tr> <tr> <td>0 12 1/5 * *</td> <td>Fire at 12:00 PM (noon) every 5 days every month, starting on the first day of the month.</td> </tr> <tr> <td>11 11 11 11 *</td> <td>Fire every November 11th at 11:11 AM.</td> </tr> <tr> <td>11 11 11 11 * 2020</td> <td>Fire at 11:11 AM on November 11th in the year 2020.</td> </tr> <tr> <td>0 0 * * 3</td> <td>Fire at midnight of each Wednesday.</td> </tr> <tr> <td>0 0 1,2 * *</td> <td>Fire at midnight of 1st, 2nd day of each month</td> </tr> <tr> <td>0 0 1,2 * 3</td> <td>Fire at midnight of 1st, 2nd day of each month, and each Wednesday.</td> </tr> </tbody></table> <h2 id="cron-job-expression-definition">Cron Job Expression Definition</h2><p>A <strong>Cron Expression</strong> that EasyCron supports is a string comprising five fields separated by white space. Fields can contain any of the allowed values, along with various combinations of the allowed special characters for that field. The fields are as follows:</p> <table> <thead> <tr> <th>Field Name</th> <th>Mandatory</th> <th>Allowed Values</th> <th>Allowed Special Characters</th> </tr> </thead> <tbody><tr> <td>Minutes</td> <td>YES</td> <td>0 - 59</td> <td>, - * /</td> </tr> <tr> <td>Hours</td> <td>YES</td> <td>0 - 23</td> <td>, - * /</td> </tr> <tr> <td>Day of month</td> <td>YES</td> <td>1 - 31</td> <td>, - * ? / L W</td> </tr> <tr> <td>Month</td> <td>YES</td> <td>1 - 12 (representing Jan - Dec), JAN - DEC (case-insensitive),JANUARY - DECEMBER (case-insensitive)</td> <td>, - * /</td> </tr> <tr> <td>Day of week</td> <td>YES</td> <td>0 - 6, 7 (representing Sun - Sat and Sun again), SUN - SAT (case-insensitive),SUNDAY - SATURDAY (case-insensitive)</td> <td>, - * ? / L #</td> </tr> <tr> <td>Year</td> <td>NO</td> <td>empty or 1970-2099</td> <td>, - * /</td> </tr> </tbody></table> <h2 id="special-characters">Special characters</h2><p>Asterisk ( * )</p> <p>The asterisk indicates that the cron expression matches for all values of the field. E.g., using an asterisk in the 1th field (minute) indicates every minute. * is a non-restricted character.</p> <p>Slash ( / )</p> <p>Slashes describe increments of ranges. For example 3-59/15 in the 1st field (minutes) indicate the third minute of the hour and every 15 minutes thereafter. The form &quot;*/...&quot; is equivalent to the form &quot;first-last/...&quot;, that is, an increment over the largest possible range of the field.</p> <p>Comma ( , )</p> <p>Commas are used to separate items of a list. For example, using &quot;1,2,5&quot; in the 5th field (day of week) means Mondays, Wednesdays and Fridays.</p> <p>Hyphen ( - )</p> <p>Hyphens define ranges. For example, 2000-2010 indicates every year between 2000 and 2010 AD, inclusive.</p> <p>L</p> <p>&#39;L&#39; stands for &quot;last&quot;. When used in the day-of-week field, it allows you to specify constructs such as &quot;the last Friday&quot; (&quot;5L&quot;) of a given month. In the day-of-month field, it specifies the last day of the month.</p> <p>W</p> <p>The &#39;W&#39; character is allowed for the day-of-month field. This character is used to specify the weekday (Monday-Friday) nearest the given day. As an example, if you were to specify &quot;15W&quot; as the value for the day-of-month field, the meaning is: &quot;the nearest weekday to the 15th of the month.&quot; So, if the 15th is a Saturday, the trigger fires on Friday the 14th. If the 15th is a Sunday, the trigger fires on Monday the 16th. If the 15th is a Tuesday, then it fires on Tuesday the 15th. However if you specify &quot;1W&quot; as the value for day- of-month, and the 1st is a Saturday, the trigger fires on Monday the 3rd, as it does not &#39;jump&#39; over the boundary of a month&#39;s days. The &#39;W&#39; character can be specified only when the day-of-month is a single day, not a range or list of days.</p> <p>Hash ( # )</p> <p>&#39;#&#39; is allowed for the day-of-week field, and must be followed by a number between one and five. For example, 5#2 indicates &quot;the second Friday&quot; of a given month.</p> <p>Question mark ( ? )</p> <p>It is used instead of &#39;*&#39; for leaving either day-of-month or day-of-week blank. &#39;?&#39; is a non-restricted character. In practice, the effect of &#39;?&#39; is same as &#39;*&#39;.</p> <h2 id="timezone">Timezone</h2><p>Your cron jobs will be run in either the timezone of your account, or the specified timezone you set up particularly for the cron job. Please check <a href="https://www.easycron.com/faq/can-i-set-up-different-timezones-for-cron-job-individually">Setting up Timezone Individually</a> for more information.</p> <h3 id="dst-daylight-saving-time-concerns">DST (Daylight Saving Time) concerns</h3><p>Different Cron implementations might have chosen different ways to handle the DST issue. In order to understand how does EasyCron handle DST, you should firstly know what are legal time points. Because only legal time points will be evaluated.<br>E.g., in timezone America/Los_Angeles and year 2016, the clock <strong>Spring Forward</strong> from <strong>2016-03-13 01:59:59 PST</strong> (after one second) to <strong>2016-03-13 03:00:00 PDT</strong>. So we only consider the following seconds are legal (no 2016-03-13 02:00:00 PST):<br>2016-03-13 01:59:59 PST<br>2016-03-13 03:00:00 PDT<br>2016-03-13 03:00:01 PDT<br>...<br>And similarly, the clock <strong>Fall Back</strong> from <strong>2016-11-06 01:59:59 PDT</strong> (after one second) to <strong>2016-11-06 01:00:00 PST</strong>. Only the following seconds are legal (no 2016-11-06 02:00:00 PDT):<br>2016-11-06 01:59:59 PDT<br>2016-11-06 01:00:00 PST<br>2016-11-06 01:00:01 PST<br>...<br>Please pay attention when writing your cron expression, so that no execution will be skipped in &quot;Spring Forward&quot;. For example, in timezone America/Los_Angeles, if you want to fire the cron job every day, instead of using <strong>30 2 * * *</strong>, you should use <strong>30 3 * * *</strong>, otherwise your cron job will not run at 2:30 AM on Mar 13, 2016, because there is <strong>no</strong> 02:30:00 PST, <strong>or</strong> 02:30:00 PDT on that day. To address this kind of problem, avoiding these vague hours is a good idea.<br>At the time when the DST ends (the &quot;Fall Back&quot; happens), there will be an hour of time (following the DST&#39;s end) during which no triggering occurs. Because when 01:59:59 PDT passes, the next trigger time of the cron job has been set to a time equal or later than 02:00:00 PST, so during 01:00:00 PST to 01:59:59 PST, no matched time will be found.</p> <h2 id="predefined-scheduling-definitions">Predefined scheduling definitions</h2><p>Easycron supports the following macros:</p> <table> <thead> <tr> <th>Entry</th> <th>Description</th> <th>Equivalent to</th> </tr> </thead> <tbody><tr> <td>@yearly (or @annually)</td> <td>Run once a year at midnight of 1 January</td> <td>0 0 1 1 * *</td> </tr> <tr> <td>@monthly</td> <td>Run once a month at midnight of the first day of the month</td> <td>0 0 1 * * *</td> </tr> <tr> <td>@weekly</td> <td>Run once a week at midnight on Sunday morning</td> <td>0 0 * * 0 *</td> </tr> <tr> <td>@daily</td> <td>Run once a day at midnight</td> <td>0 0 * * * *</td> </tr> <tr> <td>@hourly</td> <td>Run once an hour at the beginning of the hour</td> <td>0 * * * * *</td> </tr> </tbody></table> <h2 id="exceptional-case">Exceptional case</h2><p>While normally the job is executed when the time/date specification fields all match the current time and date, there is one exception: if both &quot;day of month&quot; and &quot;day of week&quot; are restricted (that is, none of them is &quot;*&quot; or &quot;?&quot;), then either the &quot;day of month&quot; field <strong>or</strong> the &quot;day of week&quot; field matching the current day is adequate. The following table lists some Cron expression examples related to exceptional cases.</p> <table> <thead> <tr> <th>Cron Expression</th> <th>Meaning</th> </tr> </thead> <tbody><tr> <td>0 0 * * 3</td> <td>Fire at 00:00 AM (midnight) every Wednesday. Because only &quot;day of week&quot; is restricted as 3, the &quot;day of month&quot; is non-restricted (it&#39;s &quot;*&quot;), it doesn&#39;t belong to the exceptional case. So both &quot;day of month&quot; and &quot;day of week&quot; must match, therefore, only Wednesday matches.</td> </tr> <tr> <td>0 0 ? * 3</td> <td>Fire at 00:00 AM (midnight) every Wednesday. Because only &quot;day of week&quot; is restricted as 3, the &quot;day of month&quot; is non-restricted (it&#39;s &quot;?&quot;), it doesn&#39;t belong to the exceptional case. So both &quot;day of month&quot; and &quot;day of week&quot; must match, therefore, only Wednesday matches.</td> </tr> <tr> <td>0 0 4 * ?</td> <td>Fire at 00:00 AM (midnight) on the 4th day of every month. Because only &quot;day of week&quot; is non-restricted (it&#39;s &quot;?&quot;), the &quot;day of month&quot; is restricted as 4, it doesn&#39;t belong to the exceptional case. So both &quot;day of month&quot; and &quot;day of week&quot; must match, therefore, only the 4th day of every month matches.</td> </tr> <tr> <td>0 0 5 * 6</td> <td>Fire at 00:00 AM (midnight) on the 5th day of every month AND every Saturday. Because both &quot;day of month&quot; and &quot;day of week&quot; are restricted (as 5 and 6 correspondingly), so it belongs to the exceptional case. That is, if either one of them matches, the &quot;day&quot; will be considered as matched.</td> </tr> </tbody></table> <p><strong>Example crontab file</strong>:</p> <pre><code class="language-sh"># /etc/crontab: system-wide crontab
# Unlike any other crontab you don&#39;t have to run the `crontab&#39;
# command to install the new version when you edit this file
# and files in /etc/cron.d. These files also have username fields,
# that none of the other crontabs do.

SHELL=/bin/sh
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin

# Example of job definition:
# .---------------- minute (0 - 59)
# | .------------- hour (0 - 23)
# | | .---------- day of month (1 - 31)
# | | | .------- month (1 - 12) OR jan,feb,mar,apr ...
# | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat
# | | | | |
# * * * * * user-name command to be executed
17 *    * * *    root  cd / &amp;&amp; run-parts --report /etc/cron.hourly
25 6    * * *    root    test -x /usr/sbin/anacron || ( cd / &amp;&amp; run-parts --report /etc/cron.daily )
47 6    * * 7    root    test -x /usr/sbin/anacron || ( cd / &amp;&amp; run-parts --report /etc/cron.weekly )
52 6    1 * *    root    test -x /usr/sbin/anacron || ( cd / &amp;&amp; run-parts --report /etc/cron.monthly )
</code></pre> <p><strong>Resources</strong>: Easycron FAQ <a href="https://www.easycron.com/faq/What-cron-expression-does-easycron-support">^faq</a>, crontab guru <a href="https://crontab.guru/">^cronguru</a>, A Beginners Guide To Cron Jobs <a href="https://ostechnix.com/a-beginners-guide-to-cron-jobs/">^ostechnix</a></p> <div class="tags"> <p>tags: <a href="../tags.html#terminal">#terminal</a></p> </div> </article> <footer> &copy; 2021 <a href="https://github.com/tg-z" target="_blank">@tg-z</a> <a href="https://twitter.com/parasite______" target="_blank">@twitter</a> </footer> </body> </html>